{
  "entities": {
    "Registration": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Registration",
      "type": "object",
      "description": "Represents a user's registration for a sport.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the registration entry."
        },
        "name": {
          "type": "string",
          "description": "The name of the person registering."
        },
        "department": {
          "type": "string",
          "description": "The department the registrant belongs to."
        },
        "maestroCode": {
          "type": "string",
          "description": "The Maestro code of the registrant. Must be unique."
        },
        "nationalId": {
          "type": "string",
          "description": "The national ID of the registrant."
        },
        "contact": {
          "type": "string",
          "description": "Contact information of the registrant."
        },
        "gender": {
          "type": "string",
          "description": "The gender of the registrant (male or female)."
        },
        "sport": {
          "type": "string",
          "description": "The sport the registrant is signing up for."
        },
        "sportOption": {
          "type": "string",
          "description": "The specific option chosen for the sport (e.g., football team name)."
        }
      },
      "required": [
        "id",
        "name",
        "department",
        "maestroCode",
        "nationalId",
        "contact",
        "gender",
        "sport",
        "sportOption"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/registrations/{registrationId}",
        "definition": {
          "entityName": "Registration",
          "schema": {
            "$ref": "#/backend/entities/Registration"
          },
          "description": "Stores user registration data for sports. Maestro code must be unique. Sport option must be unique.",
          "params": [
            {
              "name": "registrationId",
              "description": "Unique identifier for the registration document."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to store user registration data for sports, ensuring uniqueness of Maestro codes and sport options. To maintain data integrity and enforce constraints (such as unique Maestro codes and sport options), the data is stored directly in a single collection. Since all documents in the `registrations` collection have identical security requirements (only validated and unique registration data), this approach adheres to the Structural Segregation principle. Authorization is managed at the application level through backend validation (PHP code). This prevents duplicate Maestro codes and ensures sport option availability which enforces the uniqueness requirements described in the user request. Although user-based authorization isn't explicitly enforced in the data structure, the server-side validation and uniqueness constraints are critically important to the applications expected behavior. The system relies on server-side checks to ensure data integrity and prevent conflicts, mirroring the logic in the original PHP code."
  }
}